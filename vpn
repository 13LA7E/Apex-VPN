#!/bin/bash

# Enhanced VPN control script with security options
case "$1" in
    status)
        sudo tailscale status
        ;;
    up|start)
        echo "ðŸš€ Starting VPN..."
        sudo tailscaled --state=/var/lib/tailscale/tailscaled.state --socket=/var/run/tailscale/tailscaled.sock >/dev/null 2>&1 &
        sleep 1
        sudo tailscale up --accept-routes --accept-dns
        sudo tailscale status
        ;;
    down|stop)
        echo "ðŸ›‘ Stopping VPN..."
        sudo tailscale down
        ;;
    restart)
        echo "ðŸ”„ Restarting VPN..."
        sudo tailscale down
        sudo killall tailscaled 2>/dev/null
        sleep 1
        sudo tailscaled --state=/var/lib/tailscale/tailscaled.state --socket=/var/run/tailscale/tailscaled.sock >/dev/null 2>&1 &
        sleep 1
        sudo tailscale up --accept-routes --accept-dns
        sudo tailscale status
        ;;
    secure)
        echo "ðŸ”’ Setting up maximum security..."
        ./secure-fast-vpn.sh
        ;;
    proxy)
        echo "ðŸ›¡ï¸ Setting up encrypted proxy..."
        ./max-security-proxy.sh
        ;;
    streaming)
        echo "ðŸ“º Optimizing for streaming..."
        ./streaming-optimizer.sh
        ;;
    speed)
        echo "ðŸ“Š Testing connection speed..."
        if [ -f ~/.config/streaming-browser/speed-test.sh ]; then
            ~/.config/streaming-browser/speed-test.sh
        else
            echo "Run './vpn streaming' first to setup speed testing"
        fi
        ;;
    hypersonic)
        echo "ðŸš€ Activating HYPERSONIC mode..."
        ./hypersonic.sh
        ;;
    fortknox)
        echo "ðŸ›¡ï¸ Activating FORT KNOX security..."
        ./fort-knox.sh
        ;;
    missile)
        echo "ðŸš€ Activating MISSILE mode..."
        ./missile.sh
        ;;
    godmode)
        echo "ðŸ”¥ Activating GODMODE..."
        ./godmode.sh
        ;;
    *)
        echo "âš¡ India VPN Control - ULTIMATE EDITION"
        echo ""
        echo "Usage: $0 {status|up|down|restart|secure|proxy|streaming|speed|hypersonic|fortknox|missile|godmode}"
        echo ""
        echo "ðŸ”¥ ULTIMATE MODES:"
        echo "  godmode     - ðŸ”¥ GODMODE (Everything beyond physics)"
        echo "  hypersonic  - ðŸš€ 500% speed boost (0.05s startup)"
        echo "  fortknox    - ðŸ›¡ï¸ Government-grade security"
        echo "  missile     - ðŸš€ Baby oil smooth streamlining"
        echo ""
        echo "Basic Commands:"
        echo "  status      - Show VPN status"
        echo "  up          - Start VPN connection"
        echo "  down        - Stop VPN connection"  
        echo "  restart     - Restart VPN connection"
        echo ""
        echo "Security & Speed:"
        echo "  secure      - Maximum security + speed setup"
        echo "  proxy       - Encrypted SOCKS5 proxy"
        echo "  streaming   - Optimize for 4K streaming"
        echo "  speed       - Test connection performance"
        echo ""
        echo "ðŸ’¡ Pro tip: Use 'god' command after godmode for single-letter controls!"
        echo ""
        echo "Current status:"
        sudo tailscale status 2>/dev/null || echo "VPN not running"
        ;;
esac